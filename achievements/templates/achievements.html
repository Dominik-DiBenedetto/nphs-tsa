<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    {% load static %}
    <link
        rel="icon"
        href="{% static 'images/nphs_bobcats_favicon.jpg' %}"
        type="image/x-icon"
    />

    <link rel="stylesheet" href="{% static 'css/styles.css' %}" />
    <link rel="stylesheet" href="{% static 'css/achievements.css' %}" />

    <script src="{% static 'javascript/achievements.js' %}" defer></script>

    <title>Conference Placements</title>
</head>
<body>
    {% load mycomponents %}
    {% load is_officer %} 
    {% navbar "Achievements" "none" %}
    <div class="container">
        <!-- Header -->
        <div class="header fade-in">
            <h1>Conference Placements</h1>
            <p>Track record of top 3 placements across various conferences and years</p>
            
            <!-- Filters -->
            <div class="filters">
                <div class="filter-group">
                    <label for="searchInput">Search</label>
                    <input type="text" id="searchInput" class="filter-input" placeholder="Search students, companies, or ranks...">
                </div>
                <div class="filter-group">
                    <label for="yearFilter">Year</label>
                    <select id="yearFilter" class="filter-input">
                        <option value="">All Years</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="conferenceFilter">Conference</label>
                    <select id="conferenceFilter" class="filter-input">
                        <option value="">All Conferences</option>
                    </select>
                </div>
                <button class="clear-filters" onclick="clearAllFilters()">Clear Filters</button>
            </div>
        </div>

        <!-- Stats -->
        <div class="stats fade-in">
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="stat-number" id="totalPlacements">0</span>
                    <div class="stat-label">Total Top 3s</div>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="totalConferences">0</span>
                    <div class="stat-label">Conferences</div>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="totalCompanies">0</span>
                    <div class="stat-label">Events</div>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="totalYears">0</span>
                    <div class="stat-label">Years</div>
                </div>
            </div>
        </div>

        <!-- Admin Controls -->
        {% if user.is_superuser or user|is_officer %}
        <div class="admin-controls fade-in">
            <div class="admin-panel active" id="adminPanel">
                <div class="admin-buttons">
                    <button class="admin-btn" onclick="openAddYearModal()">
                        ðŸ“… Add New Year
                    </button>
                    <button class="admin-btn success" onclick="exportData()">
                        ðŸ“¥ Export Data
                    </button>
                    <button class="admin-btn" onclick="importData()">
                        ðŸ“¤ Import Data
                    </button>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Placements Content -->
        <div id="placementsContent"></div>

        <!-- No Results -->
        <div id="noResults" class="no-results" style="display: none;">
            <h3>No placements found</h3>
            <p>Try adding data, adjusting your search criteria, or clearing the filters.</p>
        </div>
    </div>

    <!-- Add Year Modal -->
    <div class="modal" id="addYearModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add New Year</h3>
                <button class="close-btn" onclick="closeModal('addYearModal')">&times;</button>
            </div>
            <form id="addYearForm">
                <div class="form-group">
                    <label for="newYear">Year</label>
                    <input type="number" id="newYear" required>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" onclick="closeModal('addYearModal')">Cancel</button>
                    <button type="submit" class="btn-save">Add Year</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Conference Modal -->
    <div class="modal" id="addConferenceModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add New Conference</h3>
                <button class="close-btn" onclick="closeModal('addConferenceModal')">&times;</button>
            </div>
            <form id="addConferenceForm">
                <div class="form-group">
                    <label for="conferenceYear">Year</label>
                    <select id="conferenceYear" required></select>
                </div>
                <div class="form-group">
                    <label for="conferenceName">Conference Name</label>
                    <input type="text" id="conferenceName" required placeholder="Conference Name">
                </div>
                <div class="form-group">
                    <label for="conferenceLocation">Location</label>
                    <input type="text" id="conferenceLocation" required placeholder="Conference Location">
                </div>
                <div class="form-group">
                    <label for="conferenceDate">Date</label>
                    <input type="text" id="conferenceDate" required placeholder="Month day, year">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" onclick="closeModal('addConferenceModal')">Cancel</button>
                    <button type="submit" class="btn-save">Add Conference</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Placement Modal -->
    <div class="modal" id="addPlacementModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add New Placement</h3>
                <button class="close-btn" onclick="closeModal('addPlacementModal')">&times;</button>
            </div>
            <form id="addPlacementForm">
                <div class="form-group">
                    <label for="placementCompany">Event</label>
                    <input type="text" id="placementCompany" required placeholder="Event name">
                </div>
                <div class="form-group">
                    <label for="placementStudent">Student Names</label>
                    <input type="text" id="placementStudent" required placeholder="Name1, Name2, etc.">
                </div>
                <div class="form-group">
                    <label for="placementPosition">Placement</label>
                    <input type="text" id="placementPosition" required placeholder="1st, 2nd, or 3rd">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" onclick="closeModal('addPlacementModal')">Cancel</button>
                    <button type="submit" class="btn-save">Add Placement</button>
                </div>
            </form>
        </div>
    </div>
</body>
</html>